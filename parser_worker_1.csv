timestamp,worker_id,attempt,start_date,days,status,message
2025-12-16T13:35:07.634660,1,1,2025-12-16,4,print,[parser-1] attempt 1: starting range 2025-12-16 -> 2025-12-19
2025-12-16T13:35:07.635713,1,1,2025-12-16,4,start,starting range 2025-12-16 -> 2025-12-19
2025-12-16T13:35:07.635879,1,1,2025-12-16,4,print,[trace] create_browser_options start
2025-12-16T13:35:07.636071,1,1,2025-12-16,4,print,[trace] get_connection start
2025-12-16T13:35:07.661936,1,1,2025-12-16,4,print,[trace] get_connection yield connection
2025-12-16T13:35:07.663064,1,1,2025-12-16,4,print,[trace] PostgresPriceRepository.__init__ start
2025-12-16T13:35:14.359013,1,1,2025-12-16,4,print,[trace] SeleniumHotelGateway.__init__ start
2025-12-16T13:35:14.362783,1,1,2025-12-16,4,print,[trace] SeleniumHotelGateway._open_site start
2025-12-16T13:35:14.363084,1,1,2025-12-16,4,print,[trace] find_btn start
2025-12-16T13:35:40.147710,1,1,2025-12-16,4,print,"Нашел рамку ""block--content"""
2025-12-16T13:35:40.337171,1,1,2025-12-16,4,print,"Нашел рамку ""tl-booking-form"""
2025-12-16T13:35:40.618893,1,1,2025-12-16,4,print,Нашел и переключился на iframe
2025-12-16T13:35:43.509700,1,1,2025-12-16,4,print,"Нашел ""page-container"""
2025-12-16T13:35:55.653212,1,1,2025-12-16,4,print,[trace] PriceParsingService.__init__ start
2025-12-16T13:35:55.670737,1,1,2025-12-16,4,print,"[trace] parse_period start start_date=2025-12-16, days=4"
2025-12-16T13:35:55.674380,1,1,2025-12-16,4,print,[trace] parse_period processing date=2025-12-16
2025-12-16T13:35:55.681471,1,1,2025-12-16,4,print,[trace] get_regular_prices_for_date start dt=2025-12-16
2025-12-16T13:35:55.689641,1,1,2025-12-16,4,print,[trace] switch_dates start for date=2025-12-16
2025-12-16T13:35:56.034240,1,1,2025-12-16,4,print,"Нашел элемент ""input_date"""
2025-12-16T13:35:56.270922,1,1,2025-12-16,4,print,"Нашел элемент ""input_btn"""
2025-12-16T13:35:56.531925,1,1,2025-12-16,4,print,"Проскроллил к ""input_btn"""
2025-12-16T13:35:57.344690,1,1,2025-12-16,4,print,"Кликнул на ""input_btn"""
2025-12-16T13:35:58.033454,1,1,2025-12-16,4,print,"Нашел рамку выбора дат ""x-modal__container"""
2025-12-16T13:36:01.039574,1,1,2025-12-16,4,print,[trace] find_dates start
2025-12-16T13:36:07.643428,1,1,2025-12-16,4,print,Нашел список дат для выбора
2025-12-16T13:36:12.507219,1,1,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-16, procedure=arrival"
2025-12-16T13:36:15.160018,1,1,2025-12-16,4,print,Кликнул по кнопке заезда
2025-12-16T13:36:15.160217,1,1,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-16, procedure=checkout"
2025-12-16T13:36:17.140501,1,1,2025-12-16,4,print,Кликнул по кнопке выезда
2025-12-16T13:36:21.144411,1,1,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:36:39.294914,1,1,2025-12-16,4,print,На 16.12.2025 найдено: 23 доступных категорий
2025-12-16T13:36:42.433330,1,1,2025-12-16,4,print,Выбрал 1 категорию из 23 найденных
2025-12-16T13:36:42.435683,1,1,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:36:43.213679,1,1,2025-12-16,4,print,Переходим в категорию 1 из списка и спим 4 секунды
2025-12-16T13:36:47.214772,1,1,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:36:47.682142,1,1,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:36:50.683713,1,1,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:37:04.316891,1,1,2025-12-16,4,print,Выбрал 2 категорию из 23 найденных
2025-12-16T13:37:04.325386,1,1,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:37:04.657826,1,1,2025-12-16,4,print,Переходим в категорию 2 из списка и спим 4 секунды
2025-12-16T13:37:08.664531,1,1,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:37:09.825343,1,1,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:37:12.695727,1,1,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:37:27.025649,1,1,2025-12-16,4,print,Выбрал 3 категорию из 23 найденных
2025-12-16T13:37:27.026401,1,1,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:37:27.201636,1,1,2025-12-16,4,print,Переходим в категорию 3 из списка и спим 4 секунды
2025-12-16T13:37:31.203051,1,1,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:37:33.745273,1,1,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:37:36.787421,1,1,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:46:58.561190,1,1,2025-12-16,4,print,[trace] get_connection closing connection
2025-12-16T13:46:59.425456,1,1,2025-12-16,4,print,[parser-1] attempt 1: failed on range 2025-12-16 -> 2025-12-19
2025-12-16T13:46:59.425862,1,1,2025-12-16,4,print,Traceback (most recent call last):
2025-12-16T13:46:59.425919,1,1,2025-12-16,4,print,"File ""/app/scripts/run_price_parser.py"", line 140, in run_parser"
2025-12-16T13:46:59.426003,1,1,2025-12-16,4,print,"service.parse_period(start_date, days, progress_callback)"
2025-12-16T13:46:59.426068,1,1,2025-12-16,4,print,"File ""/app/app/price_parsing_service.py"", line 16, in parse_period"
2025-12-16T13:46:59.426112,1,1,2025-12-16,4,print,prices = self.gateway.get_regular_prices_for_date(d)
2025-12-16T13:46:59.426240,1,1,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T13:46:59.426310,1,1,2025-12-16,4,print,"File ""/app/infrastructure/selen/hotel_gateway.py"", line 99, in get_regular_prices_for_date"
2025-12-16T13:46:59.426369,1,1,2025-12-16,4,print,categories = find_categories(self.browser)
2025-12-16T13:46:59.426410,1,1,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T13:46:59.426451,1,1,2025-12-16,4,print,"File ""/app/parser/funcs/prices_funcs.py"", line 65, in find_categories"
2025-12-16T13:46:59.426567,1,1,2025-12-16,4,print,"temp_list = [x for x in browser.find_elements(By.CLASS_NAME, 'tl-btn') if x.text != '']"
2025-12-16T13:46:59.426619,1,1,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T13:46:59.426662,1,1,2025-12-16,4,print,"File ""/app/parser/funcs/prices_funcs.py"", line 65, in <listcomp>"
2025-12-16T13:46:59.426709,1,1,2025-12-16,4,print,"temp_list = [x for x in browser.find_elements(By.CLASS_NAME, 'tl-btn') if x.text != '']"
2025-12-16T13:46:59.426758,1,1,2025-12-16,4,print,^^^^^^
2025-12-16T13:46:59.426867,1,1,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 89, in text"
2025-12-16T13:46:59.426925,1,1,2025-12-16,4,print,"return self._execute(Command.GET_ELEMENT_TEXT)[""value""]"
2025-12-16T13:46:59.426968,1,1,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T13:46:59.427087,1,1,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 394, in _execute"
2025-12-16T13:46:59.427170,1,1,2025-12-16,4,print,"return self._parent.execute(command, params)"
2025-12-16T13:46:59.427215,1,1,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T13:46:59.427257,1,1,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webdriver.py"", line 347, in execute"
2025-12-16T13:46:59.427299,1,1,2025-12-16,4,print,self.error_handler.check_response(response)
2025-12-16T13:46:59.427546,1,1,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/errorhandler.py"", line 229, in check_response"
2025-12-16T13:46:59.427703,1,1,2025-12-16,4,print,"raise exception_class(message, screen, stacktrace)"
2025-12-16T13:46:59.427756,1,1,2025-12-16,4,print,selenium.common.exceptions.TimeoutException: Message: timeout: Timed out receiving message from renderer: 300.000
2025-12-16T13:46:59.427797,1,1,2025-12-16,4,print,(Session info: chrome=143.0.7499.109)
2025-12-16T13:46:59.427834,1,1,2025-12-16,4,print,Stacktrace:
2025-12-16T13:46:59.427871,1,1,2025-12-16,4,print,#0 0x59fb396662d2 <unknown>
2025-12-16T13:46:59.427908,1,1,2025-12-16,4,print,#1 0x59fb390ab5eb <unknown>
2025-12-16T13:46:59.427943,1,1,2025-12-16,4,print,#2 0x59fb390952cd <unknown>
2025-12-16T13:46:59.427982,1,1,2025-12-16,4,print,#3 0x59fb390950c5 <unknown>
2025-12-16T13:46:59.428172,1,1,2025-12-16,4,print,#4 0x59fb39093513 <unknown>
2025-12-16T13:46:59.428297,1,1,2025-12-16,4,print,#5 0x59fb3909397a <unknown>
2025-12-16T13:46:59.428866,1,1,2025-12-16,4,print,#6 0x59fb390a29d3 <unknown>
2025-12-16T13:46:59.429146,1,1,2025-12-16,4,print,#7 0x59fb390b9e71 <unknown>
2025-12-16T13:46:59.429250,1,1,2025-12-16,4,print,#8 0x59fb390c059f <unknown>
2025-12-16T13:46:59.429321,1,1,2025-12-16,4,print,#9 0x59fb39093f7c <unknown>
2025-12-16T13:46:59.430211,1,1,2025-12-16,4,print,#10 0x59fb390b9aaa <unknown>
2025-12-16T13:46:59.431502,1,1,2025-12-16,4,print,#11 0x59fb39141871 <unknown>
2025-12-16T13:46:59.433619,1,1,2025-12-16,4,print,#12 0x59fb3911fb37 <unknown>
2025-12-16T13:46:59.434560,1,1,2025-12-16,4,print,#13 0x59fb390edf17 <unknown>
2025-12-16T13:46:59.434989,1,1,2025-12-16,4,print,#14 0x59fb390eece5 <unknown>
2025-12-16T13:46:59.435112,1,1,2025-12-16,4,print,#15 0x59fb39630f04 <unknown>
2025-12-16T13:46:59.435163,1,1,2025-12-16,4,print,#16 0x59fb396341f4 <unknown>
2025-12-16T13:46:59.435463,1,1,2025-12-16,4,print,#17 0x59fb39633cae <unknown>
2025-12-16T13:46:59.435721,1,1,2025-12-16,4,print,#18 0x59fb39634689 <unknown>
2025-12-16T13:46:59.435785,1,1,2025-12-16,4,print,#19 0x59fb3961a91a <unknown>
2025-12-16T13:46:59.435833,1,1,2025-12-16,4,print,#20 0x59fb396349fa <unknown>
2025-12-16T13:46:59.435882,1,1,2025-12-16,4,print,#21 0x59fb396034c9 <unknown>
2025-12-16T13:46:59.435927,1,1,2025-12-16,4,print,#22 0x59fb39653989 <unknown>
2025-12-16T13:46:59.436093,1,1,2025-12-16,4,print,#23 0x59fb39653b75 <unknown>
2025-12-16T13:46:59.436161,1,1,2025-12-16,4,print,#24 0x59fb396655a9 <unknown>
2025-12-16T13:46:59.436275,1,1,2025-12-16,4,print,#25 0x76b33fbc1b7b <unknown>
2025-12-16T13:46:59.436568,1,1,2025-12-16,4,error,"Traceback (most recent call last):
  File ""/app/scripts/run_price_parser.py"", line 140, in run_parser
    service.parse_period(start_date, days, progress_callback)
  File ""/app/app/price_parsing_service.py"", line 16, in parse_period
    prices = self.gateway.get_regular_prices_for_date(d)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/app/infrastructure/selen/hotel_gateway.py"", line 99, in get_regular_prices_for_date
    categories = find_categories(self.browser)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/app/parser/funcs/prices_funcs.py"", line 65, in find_categories
    temp_list = [x for x in browser.find_elements(By.CLASS_NAME, 'tl-btn') if x.text != '']
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/app/parser/funcs/prices_funcs.py"", line 65, in <listcomp>
    temp_list = [x for x in browser.find_elements(By.CLASS_NAME, 'tl-btn') if x.text != '']
                                                                              ^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 89, in text
    return self._execute(Command.GET_ELEMENT_TEXT)[""value""]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 394, in _execute
    return self._parent.execute(command, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webdriver.py"", line 347, in execute
    self.error_handler.check_response(response)
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/errorhandler.py"", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.TimeoutException: Message: timeout: Timed out receiving message from renderer: 300.000
  (Session info: chrome=143.0.7499.109)
Stacktrace:
#0 0x59fb396662d2 <unknown>
#1 0x59fb390ab5eb <unknown>
#2 0x59fb390952cd <unknown>
#3 0x59fb390950c5 <unknown>
#4 0x59fb39093513 <unknown>
#5 0x59fb3909397a <unknown>
#6 0x59fb390a29d3 <unknown>
#7 0x59fb390b9e71 <unknown>
#8 0x59fb390c059f <unknown>
#9 0x59fb39093f7c <unknown>
#10 0x59fb390b9aaa <unknown>
#11 0x59fb39141871 <unknown>
#12 0x59fb3911fb37 <unknown>
#13 0x59fb390edf17 <unknown>
#14 0x59fb390eece5 <unknown>
#15 0x59fb39630f04 <unknown>
#16 0x59fb396341f4 <unknown>
#17 0x59fb39633cae <unknown>
#18 0x59fb39634689 <unknown>
#19 0x59fb3961a91a <unknown>
#20 0x59fb396349fa <unknown>
#21 0x59fb396034c9 <unknown>
#22 0x59fb39653989 <unknown>
#23 0x59fb39653b75 <unknown>
#24 0x59fb396655a9 <unknown>
#25 0x76b33fbc1b7b <unknown>

"
2025-12-16T13:47:07.079550,1,2,2025-12-16,4,print,[parser-1] attempt 2: starting range 2025-12-16 -> 2025-12-19
2025-12-16T13:47:07.082531,1,2,2025-12-16,4,start,starting range 2025-12-16 -> 2025-12-19
2025-12-16T13:47:07.082818,1,2,2025-12-16,4,print,[trace] create_browser_options start
2025-12-16T13:47:07.083048,1,2,2025-12-16,4,print,[trace] get_connection start
2025-12-16T13:47:07.331493,1,2,2025-12-16,4,print,[trace] get_connection yield connection
2025-12-16T13:47:07.331987,1,2,2025-12-16,4,print,[trace] PostgresPriceRepository.__init__ start
2025-12-16T13:47:14.728109,1,2,2025-12-16,4,print,[trace] SeleniumHotelGateway.__init__ start
2025-12-16T13:47:14.728474,1,2,2025-12-16,4,print,[trace] SeleniumHotelGateway._open_site start
2025-12-16T13:47:14.728687,1,2,2025-12-16,4,print,[trace] find_btn start
2025-12-16T13:47:37.665142,1,2,2025-12-16,4,print,"Нашел рамку ""block--content"""
2025-12-16T13:47:37.727716,1,2,2025-12-16,4,print,"Нашел рамку ""tl-booking-form"""
2025-12-16T13:47:37.977887,1,2,2025-12-16,4,print,Нашел и переключился на iframe
2025-12-16T13:47:41.000283,1,2,2025-12-16,4,print,"Нашел ""page-container"""
2025-12-16T13:47:52.858177,1,2,2025-12-16,4,print,[trace] PriceParsingService.__init__ start
2025-12-16T13:47:52.859098,1,2,2025-12-16,4,print,"[trace] parse_period start start_date=2025-12-16, days=4"
2025-12-16T13:47:52.859641,1,2,2025-12-16,4,print,[trace] parse_period processing date=2025-12-16
2025-12-16T13:47:52.859895,1,2,2025-12-16,4,print,[trace] get_regular_prices_for_date start dt=2025-12-16
2025-12-16T13:47:52.860712,1,2,2025-12-16,4,print,[trace] switch_dates start for date=2025-12-16
2025-12-16T13:47:53.861235,1,2,2025-12-16,4,print,"Нашел элемент ""input_date"""
2025-12-16T13:47:54.264336,1,2,2025-12-16,4,print,"Нашел элемент ""input_btn"""
2025-12-16T13:47:54.333363,1,2,2025-12-16,4,print,"Проскроллил к ""input_btn"""
2025-12-16T13:47:54.587320,1,2,2025-12-16,4,print,"Кликнул на ""input_btn"""
2025-12-16T13:47:54.715004,1,2,2025-12-16,4,print,"Нашел рамку выбора дат ""x-modal__container"""
2025-12-16T13:47:57.716485,1,2,2025-12-16,4,print,[trace] find_dates start
2025-12-16T13:48:04.025435,1,2,2025-12-16,4,print,Нашел список дат для выбора
2025-12-16T13:48:09.027041,1,2,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-16, procedure=arrival"
2025-12-16T13:48:11.128852,1,2,2025-12-16,4,print,Кликнул по кнопке заезда
2025-12-16T13:48:11.129344,1,2,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-16, procedure=checkout"
2025-12-16T13:48:13.443796,1,2,2025-12-16,4,print,Кликнул по кнопке выезда
2025-12-16T13:48:17.445298,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:48:28.345458,1,2,2025-12-16,4,print,На 16.12.2025 найдено: 23 доступных категорий
2025-12-16T13:48:31.592988,1,2,2025-12-16,4,print,Выбрал 1 категорию из 23 найденных
2025-12-16T13:48:31.593928,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:48:31.914492,1,2,2025-12-16,4,print,Переходим в категорию 1 из списка и спим 4 секунды
2025-12-16T13:48:35.916994,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:48:36.477693,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:48:39.480549,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:48:54.969390,1,2,2025-12-16,4,print,Выбрал 2 категорию из 23 найденных
2025-12-16T13:48:54.972291,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:48:55.115612,1,2,2025-12-16,4,print,Переходим в категорию 2 из списка и спим 4 секунды
2025-12-16T13:48:59.117288,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:49:00.673828,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:49:03.464967,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:49:17.436504,1,2,2025-12-16,4,print,Выбрал 3 категорию из 23 найденных
2025-12-16T13:49:17.439319,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:49:17.584031,1,2,2025-12-16,4,print,Переходим в категорию 3 из списка и спим 4 секунды
2025-12-16T13:49:21.585305,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:49:21.836738,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:49:24.837519,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:49:36.250652,1,2,2025-12-16,4,print,Выбрал 4 категорию из 23 найденных
2025-12-16T13:49:36.255422,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:49:36.463512,1,2,2025-12-16,4,print,Переходим в категорию 4 из списка и спим 4 секунды
2025-12-16T13:49:40.466639,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:49:40.759569,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:49:43.760721,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:49:55.709191,1,2,2025-12-16,4,print,Выбрал 5 категорию из 23 найденных
2025-12-16T13:49:55.718870,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:49:55.944418,1,2,2025-12-16,4,print,Переходим в категорию 5 из списка и спим 4 секунды
2025-12-16T13:49:59.947455,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:50:00.431591,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:50:03.274297,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:50:19.942260,1,2,2025-12-16,4,print,Выбрал 6 категорию из 23 найденных
2025-12-16T13:50:19.968016,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:50:20.223419,1,2,2025-12-16,4,print,Переходим в категорию 6 из списка и спим 4 секунды
2025-12-16T13:50:24.225077,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:50:24.564901,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:50:27.568032,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:50:38.003158,1,2,2025-12-16,4,print,Выбрал 7 категорию из 23 найденных
2025-12-16T13:50:38.004844,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:50:38.160240,1,2,2025-12-16,4,print,Переходим в категорию 7 из списка и спим 4 секунды
2025-12-16T13:50:42.163390,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:50:42.812998,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:50:45.815396,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:51:01.079875,1,2,2025-12-16,4,print,Выбрал 8 категорию из 23 найденных
2025-12-16T13:51:01.089138,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:51:01.804947,1,2,2025-12-16,4,print,Переходим в категорию 8 из списка и спим 4 секунды
2025-12-16T13:51:05.618224,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:51:06.771769,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:51:09.781123,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:51:21.057796,1,2,2025-12-16,4,print,Выбрал 9 категорию из 23 найденных
2025-12-16T13:51:21.059495,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:51:21.191971,1,2,2025-12-16,4,print,Переходим в категорию 9 из списка и спим 4 секунды
2025-12-16T13:51:25.243648,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:51:25.545813,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:51:28.557568,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:51:43.019318,1,2,2025-12-16,4,print,Выбрал 10 категорию из 23 найденных
2025-12-16T13:51:43.026298,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:51:43.182800,1,2,2025-12-16,4,print,Переходим в категорию 10 из списка и спим 4 секунды
2025-12-16T13:51:47.183429,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:51:47.446520,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:51:50.447424,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:52:02.096825,1,2,2025-12-16,4,print,Выбрал 11 категорию из 23 найденных
2025-12-16T13:52:02.102927,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:52:02.378664,1,2,2025-12-16,4,print,Переходим в категорию 11 из списка и спим 4 секунды
2025-12-16T13:52:06.163348,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:52:07.687947,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:52:10.710146,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:52:27.643773,1,2,2025-12-16,4,print,Выбрал 12 категорию из 23 найденных
2025-12-16T13:52:27.651311,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:52:27.821446,1,2,2025-12-16,4,print,Переходим в категорию 12 из списка и спим 4 секунды
2025-12-16T13:52:31.822963,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:52:32.277586,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:52:35.092985,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:52:45.294746,1,2,2025-12-16,4,print,Выбрал 13 категорию из 23 найденных
2025-12-16T13:52:45.295851,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:52:45.410651,1,2,2025-12-16,4,print,Переходим в категорию 13 из списка и спим 4 секунды
2025-12-16T13:52:49.411609,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:52:50.581643,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:52:53.586932,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:53:06.299398,1,2,2025-12-16,4,print,Выбрал 14 категорию из 23 найденных
2025-12-16T13:53:06.308168,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:53:06.398818,1,2,2025-12-16,4,print,Переходим в категорию 14 из списка и спим 4 секунды
2025-12-16T13:53:10.401057,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:53:10.648092,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:53:13.648868,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:53:26.997903,1,2,2025-12-16,4,print,Выбрал 15 категорию из 23 найденных
2025-12-16T13:53:27.006220,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:53:27.184078,1,2,2025-12-16,4,print,Переходим в категорию 15 из списка и спим 4 секунды
2025-12-16T13:53:31.206008,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:53:32.588904,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:53:35.326950,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:53:50.537108,1,2,2025-12-16,4,print,Выбрал 16 категорию из 23 найденных
2025-12-16T13:53:50.547344,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:53:50.890554,1,2,2025-12-16,4,print,Переходим в категорию 16 из списка и спим 4 секунды
2025-12-16T13:53:54.931434,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:53:57.399543,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:54:00.416131,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:54:23.395802,1,2,2025-12-16,4,print,Выбрал 17 категорию из 23 найденных
2025-12-16T13:54:23.437538,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:54:23.876840,1,2,2025-12-16,4,print,Переходим в категорию 17 из списка и спим 4 секунды
2025-12-16T13:54:27.901358,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:54:30.001935,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:54:33.023311,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:54:56.876775,1,2,2025-12-16,4,print,Выбрал 18 категорию из 23 найденных
2025-12-16T13:54:56.899406,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:54:57.425382,1,2,2025-12-16,4,print,Переходим в категорию 18 из списка и спим 4 секунды
2025-12-16T13:55:01.437953,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:55:03.599365,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:55:06.618138,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:55:49.917567,1,2,2025-12-16,4,print,Выбрал 19 категорию из 23 найденных
2025-12-16T13:55:49.934391,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:55:50.733015,1,2,2025-12-16,4,print,Переходим в категорию 19 из списка и спим 4 секунды
2025-12-16T13:55:54.772677,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:56:10.194341,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:56:13.201624,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:56:27.511454,1,2,2025-12-16,4,print,Выбрал 20 категорию из 23 найденных
2025-12-16T13:56:27.521704,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:56:27.685562,1,2,2025-12-16,4,print,Переходим в категорию 20 из списка и спим 4 секунды
2025-12-16T13:56:31.692042,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:56:33.350214,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:56:36.374384,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:57:01.425925,1,2,2025-12-16,4,print,Выбрал 21 категорию из 23 найденных
2025-12-16T13:57:01.477343,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:57:02.222002,1,2,2025-12-16,4,print,Переходим в категорию 21 из списка и спим 4 секунды
2025-12-16T13:57:06.241273,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:57:13.184465,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:57:16.227840,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:58:00.270266,1,2,2025-12-16,4,print,Выбрал 22 категорию из 23 найденных
2025-12-16T13:58:00.289555,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:58:02.165517,1,2,2025-12-16,4,print,Переходим в категорию 22 из списка и спим 4 секунды
2025-12-16T13:58:06.213022,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:58:22.523321,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:58:25.539174,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:58:58.929515,1,2,2025-12-16,4,print,Выбрал 23 категорию из 23 найденных
2025-12-16T13:58:58.946184,1,2,2025-12-16,4,print,[trace] check_last_room start
2025-12-16T13:59:01.009960,1,2,2025-12-16,4,print,Переходим в категорию 23 из списка и спим 4 секунды
2025-12-16T13:59:04.717163,1,2,2025-12-16,4,print,[trace] extract_regular_prices start date=2025-12-16
2025-12-16T13:59:07.682346,1,2,2025-12-16,4,print,"Нашел кнопку возврата к выбору категорий и кликнул по ней, спим 3 секунды"
2025-12-16T13:59:10.731032,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:59:27.045258,1,2,2025-12-16,4,print,[trace] save_regular_prices start count=23
2025-12-16T13:59:27.926765,1,2,2025-12-16,4,print,[parser-1] progress 1/4 (25%)
2025-12-16T13:59:27.930977,1,2,2025-12-16,4,print,[trace] parse_period processing date=2025-12-17
2025-12-16T13:59:27.931500,1,2,2025-12-16,4,print,[trace] get_regular_prices_for_date start dt=2025-12-17
2025-12-16T13:59:27.933311,1,2,2025-12-16,4,print,[trace] switch_dates start for date=2025-12-17
2025-12-16T13:59:28.185875,1,2,2025-12-16,4,print,"Нашел элемент ""input_date"""
2025-12-16T13:59:28.222258,1,2,2025-12-16,4,print,"Нашел элемент ""input_btn"""
2025-12-16T13:59:28.255600,1,2,2025-12-16,4,print,"Проскроллил к ""input_btn"""
2025-12-16T13:59:28.431704,1,2,2025-12-16,4,print,"Кликнул на ""input_btn"""
2025-12-16T13:59:28.794157,1,2,2025-12-16,4,print,"Нашел рамку выбора дат ""x-modal__container"""
2025-12-16T13:59:31.852317,1,2,2025-12-16,4,print,[trace] find_dates start
2025-12-16T13:59:39.283689,1,2,2025-12-16,4,print,Нашел список дат для выбора
2025-12-16T13:59:44.297777,1,2,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-17, procedure=arrival"
2025-12-16T13:59:47.468787,1,2,2025-12-16,4,print,Кликнул по кнопке заезда
2025-12-16T13:59:47.476897,1,2,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-17, procedure=checkout"
2025-12-16T13:59:51.455371,1,2,2025-12-16,4,print,Кликнул по кнопке выезда
2025-12-16T13:59:55.486457,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:59:55.709166,1,2,2025-12-16,4,print,"[trace] категории не загрузились, пробуем снова (2/4)"
2025-12-16T13:59:59.728952,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T13:59:59.940309,1,2,2025-12-16,4,print,"[trace] категории не загрузились, пробуем снова (3/4)"
2025-12-16T14:00:03.972613,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T14:00:05.258480,1,2,2025-12-16,4,print,"[trace] категории не загрузились, пробуем снова (4/4)"
2025-12-16T14:00:08.693290,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T14:00:08.986027,1,2,2025-12-16,4,print,На 17.12.2025 найдено: 0 доступных категорий
2025-12-16T14:00:08.989573,1,2,2025-12-16,4,print,[trace] save_regular_prices start count=0
2025-12-16T14:00:09.004657,1,2,2025-12-16,4,print,[parser-1] progress 2/4 (50%)
2025-12-16T14:00:09.004950,1,2,2025-12-16,4,print,[trace] parse_period processing date=2025-12-18
2025-12-16T14:00:09.005047,1,2,2025-12-16,4,print,[trace] get_regular_prices_for_date start dt=2025-12-18
2025-12-16T14:00:09.005138,1,2,2025-12-16,4,print,[trace] switch_dates start for date=2025-12-18
2025-12-16T14:00:09.033552,1,2,2025-12-16,4,print,"Нашел элемент ""input_date"""
2025-12-16T14:00:09.070081,1,2,2025-12-16,4,print,"Нашел элемент ""input_btn"""
2025-12-16T14:00:09.146227,1,2,2025-12-16,4,print,"Проскроллил к ""input_btn"""
2025-12-16T14:00:09.411574,1,2,2025-12-16,4,print,"Кликнул на ""input_btn"""
2025-12-16T14:00:11.938396,1,2,2025-12-16,4,print,"Нашел рамку выбора дат ""x-modal__container"""
2025-12-16T14:00:14.956409,1,2,2025-12-16,4,print,[trace] find_dates start
2025-12-16T14:00:23.750712,1,2,2025-12-16,4,print,Нашел список дат для выбора
2025-12-16T14:00:28.761562,1,2,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-18, procedure=arrival"
2025-12-16T14:00:33.800815,1,2,2025-12-16,4,print,Кликнул по кнопке заезда
2025-12-16T14:00:33.815995,1,2,2025-12-16,4,print,"[trace] find_date_btn start dt=2025-12-18, procedure=checkout"
2025-12-16T14:00:43.587340,1,2,2025-12-16,4,print,Кликнул по кнопке выезда
2025-12-16T14:00:47.608636,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T14:00:48.365132,1,2,2025-12-16,4,print,"[trace] категории не загрузились, пробуем снова (2/4)"
2025-12-16T14:00:52.408361,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T14:00:53.392911,1,2,2025-12-16,4,print,"[trace] категории не загрузились, пробуем снова (3/4)"
2025-12-16T14:00:57.562189,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T14:00:58.002038,1,2,2025-12-16,4,print,"[trace] категории не загрузились, пробуем снова (4/4)"
2025-12-16T14:01:02.014508,1,2,2025-12-16,4,print,[trace] find_categories start
2025-12-16T14:01:02.085056,1,2,2025-12-16,4,print,На 18.12.2025 найдено: 0 доступных категорий
2025-12-16T14:01:02.086892,1,2,2025-12-16,4,print,[trace] save_regular_prices start count=0
2025-12-16T14:01:02.096825,1,2,2025-12-16,4,print,[parser-1] progress 3/4 (75%)
2025-12-16T14:01:02.097160,1,2,2025-12-16,4,print,[trace] parse_period processing date=2025-12-19
2025-12-16T14:01:02.097330,1,2,2025-12-16,4,print,[trace] get_regular_prices_for_date start dt=2025-12-19
2025-12-16T14:01:02.097466,1,2,2025-12-16,4,print,[trace] switch_dates start for date=2025-12-19
2025-12-16T14:01:02.117908,1,2,2025-12-16,4,print,"Нашел элемент ""input_date"""
2025-12-16T14:01:02.135780,1,2,2025-12-16,4,print,"Нашел элемент ""input_btn"""
2025-12-16T14:01:02.166303,1,2,2025-12-16,4,print,"Проскроллил к ""input_btn"""
2025-12-16T14:01:02.493588,1,2,2025-12-16,4,print,"Кликнул на ""input_btn"""
2025-12-16T14:01:02.614186,1,2,2025-12-16,4,print,"Нашел рамку выбора дат ""x-modal__container"""
2025-12-16T14:01:05.615938,1,2,2025-12-16,4,print,[trace] find_dates start
2025-12-16T14:01:17.548056,1,2,2025-12-16,4,print,"Не нашел dates, спит 3 секунды и пробует снова"
2025-12-16T14:01:20.581695,1,2,2025-12-16,4,print,[trace] find_dates start
2025-12-16T14:01:27.075595,1,2,2025-12-16,4,print,[trace] get_connection closing connection
2025-12-16T14:01:27.462555,1,2,2025-12-16,4,print,[parser-1] attempt 2: failed on range 2025-12-16 -> 2025-12-19
2025-12-16T14:01:27.466653,1,2,2025-12-16,4,print,Traceback (most recent call last):
2025-12-16T14:01:27.468927,1,2,2025-12-16,4,print,"File ""/app/parser/funcs/prices_funcs.py"", line 162, in switch_dates"
2025-12-16T14:01:27.470386,1,2,2025-12-16,4,print,dates = find_dates(frame1)
2025-12-16T14:01:27.472858,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.474921,1,2,2025-12-16,4,print,"File ""/app/parser/funcs/prices_funcs.py"", line 49, in find_dates"
2025-12-16T14:01:27.478970,1,2,2025-12-16,4,print,"data_months[0][:7]: [d for d in months[0].find_elements(By.XPATH, './/span') if d.text.isdigit()],"
2025-12-16T14:01:27.479834,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.481495,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 438, in find_elements"
2025-12-16T14:01:27.482816,1,2,2025-12-16,4,print,"return self._execute(Command.FIND_CHILD_ELEMENTS, {""using"": by, ""value"": value})[""value""]"
2025-12-16T14:01:27.483603,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.484004,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 394, in _execute"
2025-12-16T14:01:27.484519,1,2,2025-12-16,4,print,"return self._parent.execute(command, params)"
2025-12-16T14:01:27.484775,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.484897,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webdriver.py"", line 347, in execute"
2025-12-16T14:01:27.484967,1,2,2025-12-16,4,print,self.error_handler.check_response(response)
2025-12-16T14:01:27.485021,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/errorhandler.py"", line 229, in check_response"
2025-12-16T14:01:27.485333,1,2,2025-12-16,4,print,"raise exception_class(message, screen, stacktrace)"
2025-12-16T14:01:27.485537,1,2,2025-12-16,4,print,selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
2025-12-16T14:01:27.485649,1,2,2025-12-16,4,print,"(Session info: chrome=143.0.7499.109); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception"
2025-12-16T14:01:27.485741,1,2,2025-12-16,4,print,Stacktrace:
2025-12-16T14:01:27.485792,1,2,2025-12-16,4,print,#0 0x5cb272e802d2 <unknown>
2025-12-16T14:01:27.485847,1,2,2025-12-16,4,print,#1 0x5cb2728c55eb <unknown>
2025-12-16T14:01:27.485901,1,2,2025-12-16,4,print,#2 0x5cb2728cc7b9 <unknown>
2025-12-16T14:01:27.485949,1,2,2025-12-16,4,print,#3 0x5cb2728cec3f <unknown>
2025-12-16T14:01:27.487664,1,2,2025-12-16,4,print,#4 0x5cb2728cec99 <unknown>
2025-12-16T14:01:27.488276,1,2,2025-12-16,4,print,#5 0x5cb2728ced25 <unknown>
2025-12-16T14:01:27.488512,1,2,2025-12-16,4,print,#6 0x5cb272914c74 <unknown>
2025-12-16T14:01:27.488755,1,2,2025-12-16,4,print,#7 0x5cb272915675 <unknown>
2025-12-16T14:01:27.488847,1,2,2025-12-16,4,print,#8 0x5cb272909f67 <unknown>
2025-12-16T14:01:27.488923,1,2,2025-12-16,4,print,#9 0x5cb272939db1 <unknown>
2025-12-16T14:01:27.489006,1,2,2025-12-16,4,print,#10 0x5cb272909a51 <unknown>
2025-12-16T14:01:27.489067,1,2,2025-12-16,4,print,#11 0x5cb272939f72 <unknown>
2025-12-16T14:01:27.489108,1,2,2025-12-16,4,print,#12 0x5cb27295ba32 <unknown>
2025-12-16T14:01:27.489147,1,2,2025-12-16,4,print,#13 0x5cb272939b37 <unknown>
2025-12-16T14:01:27.489276,1,2,2025-12-16,4,print,#14 0x5cb272907f17 <unknown>
2025-12-16T14:01:27.489343,1,2,2025-12-16,4,print,#15 0x5cb272908ce5 <unknown>
2025-12-16T14:01:27.489389,1,2,2025-12-16,4,print,#16 0x5cb272e4af04 <unknown>
2025-12-16T14:01:27.489441,1,2,2025-12-16,4,print,#17 0x5cb272e4e1f4 <unknown>
2025-12-16T14:01:27.489492,1,2,2025-12-16,4,print,#18 0x5cb272e4dcae <unknown>
2025-12-16T14:01:27.489558,1,2,2025-12-16,4,print,#19 0x5cb272e4e689 <unknown>
2025-12-16T14:01:27.491104,1,2,2025-12-16,4,print,#20 0x5cb272e3491a <unknown>
2025-12-16T14:01:27.491740,1,2,2025-12-16,4,print,#21 0x5cb272e4e9fa <unknown>
2025-12-16T14:01:27.491942,1,2,2025-12-16,4,print,#22 0x5cb272e1d4c9 <unknown>
2025-12-16T14:01:27.492031,1,2,2025-12-16,4,print,#23 0x5cb272e6d989 <unknown>
2025-12-16T14:01:27.492102,1,2,2025-12-16,4,print,#24 0x5cb272e6db75 <unknown>
2025-12-16T14:01:27.492166,1,2,2025-12-16,4,print,#25 0x5cb272e7f5a9 <unknown>
2025-12-16T14:01:27.492218,1,2,2025-12-16,4,print,#26 0x7e0e92d5ab7b <unknown>
2025-12-16T14:01:27.492292,1,2,2025-12-16,4,print,"During handling of the above exception, another exception occurred:"
2025-12-16T14:01:27.492387,1,2,2025-12-16,4,print,Traceback (most recent call last):
2025-12-16T14:01:27.492502,1,2,2025-12-16,4,print,"File ""/app/scripts/run_price_parser.py"", line 140, in run_parser"
2025-12-16T14:01:27.492551,1,2,2025-12-16,4,print,"service.parse_period(start_date, days, progress_callback)"
2025-12-16T14:01:27.492604,1,2,2025-12-16,4,print,"File ""/app/app/price_parsing_service.py"", line 16, in parse_period"
2025-12-16T14:01:27.492666,1,2,2025-12-16,4,print,prices = self.gateway.get_regular_prices_for_date(d)
2025-12-16T14:01:27.492716,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.492767,1,2,2025-12-16,4,print,"File ""/app/infrastructure/selen/hotel_gateway.py"", line 28, in get_regular_prices_for_date"
2025-12-16T14:01:27.492996,1,2,2025-12-16,4,print,"switch_dates(self.browser, dt)"
2025-12-16T14:01:27.493128,1,2,2025-12-16,4,print,"File ""/app/parser/funcs/prices_funcs.py"", line 167, in switch_dates"
2025-12-16T14:01:27.493188,1,2,2025-12-16,4,print,dates = find_dates(frame1)
2025-12-16T14:01:27.493243,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.493302,1,2,2025-12-16,4,print,"File ""/app/parser/funcs/prices_funcs.py"", line 37, in find_dates"
2025-12-16T14:01:27.493457,1,2,2025-12-16,4,print,"frame2 = frame.find_element(By.XPATH, ""//div[@data-mode]"")"
2025-12-16T14:01:27.493562,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.493639,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 416, in find_element"
2025-12-16T14:01:27.493753,1,2,2025-12-16,4,print,"return self._execute(Command.FIND_CHILD_ELEMENT, {""using"": by, ""value"": value})[""value""]"
2025-12-16T14:01:27.493830,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.493893,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 394, in _execute"
2025-12-16T14:01:27.493993,1,2,2025-12-16,4,print,"return self._parent.execute(command, params)"
2025-12-16T14:01:27.494042,1,2,2025-12-16,4,print,^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-12-16T14:01:27.494122,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webdriver.py"", line 347, in execute"
2025-12-16T14:01:27.494243,1,2,2025-12-16,4,print,self.error_handler.check_response(response)
2025-12-16T14:01:27.494318,1,2,2025-12-16,4,print,"File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/errorhandler.py"", line 229, in check_response"
2025-12-16T14:01:27.494401,1,2,2025-12-16,4,print,"raise exception_class(message, screen, stacktrace)"
2025-12-16T14:01:27.494674,1,2,2025-12-16,4,print,"selenium.common.exceptions.NoSuchElementException: Message: no such element: Unable to locate element: {""method"":""xpath"",""selector"":""//div[@data-mode]""}"
2025-12-16T14:01:27.494802,1,2,2025-12-16,4,print,"(Session info: chrome=143.0.7499.109); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception"
2025-12-16T14:01:27.494882,1,2,2025-12-16,4,print,Stacktrace:
2025-12-16T14:01:27.495064,1,2,2025-12-16,4,print,#0 0x5cb272e802d2 <unknown>
2025-12-16T14:01:27.495215,1,2,2025-12-16,4,print,#1 0x5cb2728c55eb <unknown>
2025-12-16T14:01:27.495274,1,2,2025-12-16,4,print,#2 0x5cb27291549b <unknown>
2025-12-16T14:01:27.495343,1,2,2025-12-16,4,print,#3 0x5cb272915675 <unknown>
2025-12-16T14:01:27.495445,1,2,2025-12-16,4,print,#4 0x5cb272909b3a <unknown>
2025-12-16T14:01:27.495560,1,2,2025-12-16,4,print,#5 0x5cb272939db1 <unknown>
2025-12-16T14:01:27.499146,1,2,2025-12-16,4,print,#6 0x5cb272909a51 <unknown>
2025-12-16T14:01:27.501355,1,2,2025-12-16,4,print,#7 0x5cb272939f72 <unknown>
2025-12-16T14:01:27.502815,1,2,2025-12-16,4,print,#8 0x5cb27295ba32 <unknown>
2025-12-16T14:01:27.504794,1,2,2025-12-16,4,print,#9 0x5cb272939b37 <unknown>
2025-12-16T14:01:27.506400,1,2,2025-12-16,4,print,#10 0x5cb272907f17 <unknown>
2025-12-16T14:01:27.507262,1,2,2025-12-16,4,print,#11 0x5cb272908ce5 <unknown>
2025-12-16T14:01:27.507583,1,2,2025-12-16,4,print,#12 0x5cb272e4af04 <unknown>
2025-12-16T14:01:27.507641,1,2,2025-12-16,4,print,#13 0x5cb272e4e1f4 <unknown>
2025-12-16T14:01:27.507689,1,2,2025-12-16,4,print,#14 0x5cb272e4dcae <unknown>
2025-12-16T14:01:27.507738,1,2,2025-12-16,4,print,#15 0x5cb272e4e689 <unknown>
2025-12-16T14:01:27.507787,1,2,2025-12-16,4,print,#16 0x5cb272e3491a <unknown>
2025-12-16T14:01:27.507842,1,2,2025-12-16,4,print,#17 0x5cb272e4e9fa <unknown>
2025-12-16T14:01:27.507893,1,2,2025-12-16,4,print,#18 0x5cb272e1d4c9 <unknown>
2025-12-16T14:01:27.507948,1,2,2025-12-16,4,print,#19 0x5cb272e6d989 <unknown>
2025-12-16T14:01:27.508038,1,2,2025-12-16,4,print,#20 0x5cb272e6db75 <unknown>
2025-12-16T14:01:27.508100,1,2,2025-12-16,4,print,#21 0x5cb272e7f5a9 <unknown>
2025-12-16T14:01:27.508164,1,2,2025-12-16,4,print,#22 0x7e0e92d5ab7b <unknown>
2025-12-16T14:01:27.508563,1,2,2025-12-16,4,error,"Traceback (most recent call last):
  File ""/app/parser/funcs/prices_funcs.py"", line 162, in switch_dates
    dates = find_dates(frame1)
           ^^^^^^^^^^^^^^^^^^
  File ""/app/parser/funcs/prices_funcs.py"", line 49, in find_dates
    data_months[0][:7]: [d for d in months[0].find_elements(By.XPATH, './/span') if d.text.isdigit()],
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 438, in find_elements
    return self._execute(Command.FIND_CHILD_ELEMENTS, {""using"": by, ""value"": value})[""value""]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 394, in _execute
    return self._parent.execute(command, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webdriver.py"", line 347, in execute
    self.error_handler.check_response(response)
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/errorhandler.py"", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=143.0.7499.109); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
#0 0x5cb272e802d2 <unknown>
#1 0x5cb2728c55eb <unknown>
#2 0x5cb2728cc7b9 <unknown>
#3 0x5cb2728cec3f <unknown>
#4 0x5cb2728cec99 <unknown>
#5 0x5cb2728ced25 <unknown>
#6 0x5cb272914c74 <unknown>
#7 0x5cb272915675 <unknown>
#8 0x5cb272909f67 <unknown>
#9 0x5cb272939db1 <unknown>
#10 0x5cb272909a51 <unknown>
#11 0x5cb272939f72 <unknown>
#12 0x5cb27295ba32 <unknown>
#13 0x5cb272939b37 <unknown>
#14 0x5cb272907f17 <unknown>
#15 0x5cb272908ce5 <unknown>
#16 0x5cb272e4af04 <unknown>
#17 0x5cb272e4e1f4 <unknown>
#18 0x5cb272e4dcae <unknown>
#19 0x5cb272e4e689 <unknown>
#20 0x5cb272e3491a <unknown>
#21 0x5cb272e4e9fa <unknown>
#22 0x5cb272e1d4c9 <unknown>
#23 0x5cb272e6d989 <unknown>
#24 0x5cb272e6db75 <unknown>
#25 0x5cb272e7f5a9 <unknown>
#26 0x7e0e92d5ab7b <unknown>


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/app/scripts/run_price_parser.py"", line 140, in run_parser
    service.parse_period(start_date, days, progress_callback)
  File ""/app/app/price_parsing_service.py"", line 16, in parse_period
    prices = self.gateway.get_regular_prices_for_date(d)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/app/infrastructure/selen/hotel_gateway.py"", line 28, in get_regular_prices_for_date
    switch_dates(self.browser, dt)
  File ""/app/parser/funcs/prices_funcs.py"", line 167, in switch_dates
    dates = find_dates(frame1)
            ^^^^^^^^^^^^^^^^^^
  File ""/app/parser/funcs/prices_funcs.py"", line 37, in find_dates
    frame2 = frame.find_element(By.XPATH, ""//div[@data-mode]"")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 416, in find_element
    return self._execute(Command.FIND_CHILD_ELEMENT, {""using"": by, ""value"": value})[""value""]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webelement.py"", line 394, in _execute
    return self._parent.execute(command, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/webdriver.py"", line 347, in execute
    self.error_handler.check_response(response)
  File ""/usr/local/lib/python3.11/site-packages/selenium/webdriver/remote/errorhandler.py"", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.NoSuchElementException: Message: no such element: Unable to locate element: {""method"":""xpath"",""selector"":""//div[@data-mode]""}
  (Session info: chrome=143.0.7499.109); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
#0 0x5cb272e802d2 <unknown>
#1 0x5cb2728c55eb <unknown>
#2 0x5cb27291549b <unknown>
#3 0x5cb272915675 <unknown>
#4 0x5cb272909b3a <unknown>
#5 0x5cb272939db1 <unknown>
#6 0x5cb272909a51 <unknown>
#7 0x5cb272939f72 <unknown>
#8 0x5cb27295ba32 <unknown>
#9 0x5cb272939b37 <unknown>
#10 0x5cb272907f17 <unknown>
#11 0x5cb272908ce5 <unknown>
#12 0x5cb272e4af04 <unknown>
#13 0x5cb272e4e1f4 <unknown>
#14 0x5cb272e4dcae <unknown>
#15 0x5cb272e4e689 <unknown>
#16 0x5cb272e3491a <unknown>
#17 0x5cb272e4e9fa <unknown>
#18 0x5cb272e1d4c9 <unknown>
#19 0x5cb272e6d989 <unknown>
#20 0x5cb272e6db75 <unknown>
#21 0x5cb272e7f5a9 <unknown>
#22 0x7e0e92d5ab7b <unknown>

"
